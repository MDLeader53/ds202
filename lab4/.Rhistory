knitr::opts_chunk$set(echo = TRUE)
library(readxl)
defense <- read_excel('cyclonesFootball2018.xlsx', sheet='Defensive')
## Background
An excerpt of the individual player data of the Cyclone football team is available from Canvas. Dowload the [excel file](cyclonesFootball2018.xlsx) and put the file next to your Rmd files.
defense <- read_excel('cyclonesFootball2018.xlsx', sheet='Defensive')
str(defense)
```{r,echo=FALSE,results='hide'}
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
defense(head)
head(defense)
install.packages(c("nycflights13", "tidyverse"))
head(defense)
install.packages("tidyverse")
x <-strtoi(defense$Tackles_Solo)
head(x)
head(defense$Tackles_Solo)
defenceClean <- defense
defenceClean$Tackles_Solo <- trtoi(defense$Tackles_Solo)
defenceClean$Tackles_Solo <- strtoi(defense$Tackles_Solo)
head(defenceClean)
library(readxl)
library(readxl)
defense <- read_excel('cyclonesFootball2018.xlsx', sheet='Defensive')
str(defense)
head(defense)
defense
head(defense,10)
head(10,defense)
head(defense)
defense[1]
x =defense[1]
x
string(x)
str(x)
str(defense[0])
str(defense[2])
for (i in defense) {
defenceClean$i <- strtoi(defense$i)
}
head(defense)
for (i in defense) {
defenceClean[i] <- strtoi(defense[i])
}
str(defense[1,])
str(defense[,1])
str(defense[1])
head(defense)
head(defense)
head(defense)
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
defense <- read_excel('cyclonesFootball2018.xlsx', sheet='Defensive')
str(defense)
library(readxl)
defense <- read_excel('cyclonesFootball2018.xlsx', sheet='Defensive')
str(defense)
```{r,echo=FALSE,results='hide'}
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
## Part one: Cleaning data
The three Excel sheets are loaded into R but they are not useful to us before some cleaning. Manipulate the three imported data frames, so that the cleaned data satisfy the following:
1. The player names and opponent names are factors.
2. All offensive and defensive statistics are numerical. The `Weight` column in Biography is also numeric. (Hint: look at `?mutate_at` if you want to save writing some code).
```{r,echo=FALSE,results='hide'}
head(defense)
str(defense[1])
for (i in defense) {
defenceClean[i] <- strtoi(defense[i])
}
str(defense[2])
defenceClean <- defense
defenceClean$Tackles_Solo <- strtoi(defense$Tackles_Solo)
defenceClean$Tackles_ASST <- strtoi(defense$Tackles_ASST)
defenceClean$Tackles_TFL <- strtoi(defense$Tackles_TFL)
defenceClean$Tackles_Sack <- strtoi(defense$Tackles_Sack)
defenceClean$Turnover_FF <- strtoi(defense$Turnover_FF)
head(defenceClean)
```
3. Separate the `Height` column into two columns. Make sure the newly created columns are numeric. Then create one column that represents `Height` (Hint: Use a unit that works well). Drop any irrelavant columns from this process.
4. By cleaning the three data frames in R, at the end of this step you should have the following three clean data frames: `defClean`, `offClean`, and `bioClean`. Print the structures of these data frames. **Make sure your data types make sense for each variable.**
defenceClean$Tackles_Solo <- as.numeric(defense$Tackles_Solo)
defenceClean$Tackles_Solo <- as.numeric(defense$Tackles_Solo)
defenceClean$Tackles_ASST <-  as.numeric(defense$Tackles_ASST)
defenceClean$Tackles_TFL <-  as.numeric(defense$Tackles_TFL)
defenceClean$Tackles_Sack <-  as.numeric(defense$Tackles_Sack)
defenceClean$Turnover_FF <-  as.numeric(defense$Turnover_FF)
head(defenceClean)
head(defense)
head(defense)
head(defenceClean)
head(defense)
head(defenceClean)
head(defense)
head(defenceClean)
head(defense)
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
head(defense)
str(defense[1])
for (i in defense) {
defenceClean[i] <- strtoi(defense[i])
}
head(defense)
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
defense <- read_excel('cyclonesFootball2018.xlsx', sheet='Defensive')
str(defense)
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
head(defense)
str(defense[2])
defenceClean <- defense
defenceClean$Tackles_Solo <- as.numeric(defense$Tackles_Solo)
defenceClean$Tackles_ASST <-  as.numeric(defense$Tackles_ASST)
defenceClean$Tackles_TFL <-  as.numeric(defense$Tackles_TFL)
defenceClean$Tackles_Sack <-  as.numeric(defense$Tackles_Sack)
defenceClean$Turnover_FF <-  as.numeric(defense$Turnover_FF)
head(defenceClean)
defenceClean$Tackles_TFL <-  as.numeric(defense$Tackles_TFL)
defenceClean$Tackles_Sack <-  as.numeric(defense$Tackles_Sack)
defenceClean$Turnover_FF <-  as.numeric(defense$Turnover_FF)
defenceClean$Turnover_FR <-  as.numeric(defense$Turnover_FR)
defenceClean$Turnover_INT <-  as.numeric(defense$Turnover_INT)
defenceClean$Pass_QBH <-  as.numeric(defense$Pass_QBH)
defenceClean$Pass_PB <-  as.numeric(defense$Pass_PB)
head(defenceClean)
head(bio)
print(bio)
clean2 <- bio %<% spread (key = Height, value = Class)
library(tidyr)
clean2 <- bio %<% spread (key = Height, value = Class)
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(tidyr)
defense <- read_excel('cyclonesFootball2018.xlsx', sheet='Defensive')
str(defense)
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
clean <- defense %<% spread (key = Name, value = Opponent_Opponent)
bio$Weight <- as.numeric(bio$Weight)
source('~/.active-rstudio-document', echo=TRUE)
head(defense)
print(defense)
date: "10/17/2019"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(tidyr)
library(tidyr)
defense <- read_excel('cyclonesFootball2018.xlsx', sheet='Defensive')
str(defense)
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
head(defense)
head(defense)
clean <- defense %<% spread (key = Name, value = Opponent_Opponent)
clean <- starwars %>%
filter(`Have you seen any of the 6 films in the Star Wars franchise? Response`=="Yes")
library(dplyr)
library(tidyr)
library(ggplot2)
library(readr)
# the following lines are necessary to fix the multibyte problem and make proper names
# part of the names:
line1 <- names(starwars)
line2 <- unlist(starwars[1,])
varnames <- paste(line1, line2)
# clean up some of the multibyte characters:
names(starwars) <- enc2native(stringi::stri_trans_general(varnames, "latin-ascii"))
starwars <- starwars[-1,]
head(starwars)
clean <- starwars %>%
filter(`Have you seen any of the 6 films in the Star Wars franchise? Response`=="Yes")
clean %>% group_by(`Gender Response`) %>% count()
clean <- starwars %>%
filter(`Have you seen any of the 6 films in the Star Wars franchise? Response`=="Yes")
library(readxl)
library(tidyverse)
install.packages("tidyverse")
library(readxl)
library(tidyverse)
library(tidyr)
library(readxl)
library(tidyverse)
install.packages("tidyverse")
date: "10/17/2019"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(readxl)
library(tidyverse)
library(tidyr)
library(tidyverse)
library(tidyr)
```{r,echo=FALSE,results='hide'}
offense <- read_excel('cyclonesFootball2018.xlsx', sheet='Offensive')
bio <- read_excel('cyclonesFootball2018.xlsx', sheet='Biography')
head(defense)
clean <- defense %<% spread (key = Name, value = Opponent_Opponent)
install.packages("tidyverse")
library(tidyverse)
source('~/.active-rstudio-document', echo=TRUE)
install.packages("tidyverse")
bioClean <- bio %<% spread (key = Height, value = Class)
df1 = popularv2 %>% filter(rating %in% c('Somewhat favorably', 'Very favorably')) %>%
group_by(character) %>% summarise(popular.count= n())
df2 = popularv2 %>% group_by(character) %>% summarise(n=n())
df1 %>% full_join(df2,by='character') %>%
mutate(percentage = popular.count/n) %>%
ggplot(aes(x=character,y=percentage)) + geom_point() + coord_flip()
library(dplyr)
library(tidyr)
library(ggplot2)
library(readr)
## See original: https://fivethirtyeight.com/features/americas-favorite-star-wars-movies-and-least-favorite-characters/
starwars <- read_csv("https://raw.githubusercontent.com/fivethirtyeight/data/master/star-wars-survey/StarWars.csv")
library(dplyr)
library(tidyr)
library(ggplot2)
library(readr)
## See original: https://fivethirtyeight.com/features/americas-favorite-star-wars-movies-and-least-favorite-characters/
starwars <- read_csv("https://raw.githubusercontent.com/fivethirtyeight/data/master/star-wars-survey/StarWars.csv")
# the following lines are necessary to fix the multibyte problem and make proper names
# part of the names:
line1 <- names(starwars)
line2 <- unlist(starwars[1,])
varnames <- paste(line1, line2)
# clean up some of the multibyte characters:
names(starwars) <- enc2native(stringi::stri_trans_general(varnames, "latin-ascii"))
starwars <- starwars[-1,]
head(starwars)
clean <- starwars %>%
filter(`Have you seen any of the 6 films in the Star Wars franchise? Response`=="Yes")
clean %>% group_by(`Gender Response`) %>% count()
clean %>% group_by(`Age Response`) %>% count()
clean$`Age Response`<- factor(clean$`Age Response`,
levels= c("18-29", "30-44", "45-60", "> 60", "NA" ))
clean %>%
group_by(`Gender Response`, `Age Response`)%>%
count()
names(clean)[10] = "X10 Star Wars: Episode I  The Phantom Menace"
long = clean %>% select(1,10:15,34) %>%
gather(key = Episode, value = Rank, 2:7)
long$Rank = as.numeric(long$Rank)
long %>% group_by(Episode) %>% summarize(mean.rank = mean(Rank,na.rm=TRUE)) %>% arrange(desc(mean.rank))
long%>%
group_by(Episode, `Gender Response`)%>%
summarise(mean.rank=mean(Rank, na.rm=TRUE))
long%>%
group_by(Episode, `Gender Response`)%>%
summarise(mean.rank=mean(Rank, na.rm=TRUE))%>%
filter(!`Gender Response`=="NA")%>%
ggplot(aes(x = Episode, y = mean.rank, color=`Gender Response`))+
geom_point()+
coord_flip()
long %>%
group_by(Episode) %>%
count()
popular = starwars %>% select(16:29)
names(popular)[1] = "X16 Han Solo"
popularv2 = popular %>% gather(key=character,value=rating) %>% filter(is.na(rating)==FALSE)
df1 = popularv2 %>% filter(rating %in% c('Somewhat favorably', 'Very favorably')) %>%
group_by(character) %>% summarise(popular.count= n())
df2 = popularv2 %>% group_by(character) %>% summarise(n=n())
df1 %>% full_join(df2,by='character') %>%
mutate(percentage = popular.count/n) %>%
ggplot(aes(x=character,y=percentage)) + geom_point() + coord_flip()
head(df1)
install.packages("tidyverse")
library(tidyverse)
library(readxl)
library(tidyverse)
head(defense)
head(defense)
factor(defense)
factor(defense)
factor(defense$Name)
defense = sort(defense)
factor(defense$Name)
factor(defense)
factor(defense)
factor(defense)
head(defense)
head(defense)
n= factor(defense$Name)
head(n)
head(n)
defense$Name= factor(defense$Name)
head(n)
head(defense)
defense$Name= factor(defense$Name)
head(defense)
offense$Name= factor(offense$Name)
offense$Opponent_Opponent= factor(offense$Opponent_Opponent)
head(offense)
head(bio)
bio$Name= factor(bio$Name)
head(bio)
print(bio)
head(bio)
library(tidyverse)
source('~/.active-rstudio-document', echo=TRUE)
install.packages("tidyverse")
install.packages("tidyverse")
library(readxl)
library(tidyverse)
library(tidyr)
library(tidyverse)
install.packages(tidyverse)
install.packages("tidyverse")
install.packages()
install.packages("httr")
install.packages("tidyverse")
install.packages("readxl")
install.packages("readxl")
install.packages("tidyverse")
install.packages("xml2,httr")
install.packages("xml2")
install.packages("httr")
install.packages("tidyverse")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
install.packages('httr')
install.packages('curl')
install.packages('httr')
install.packages('curl')
knitr::opts_chunk$set(echo = TRUE)
(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
install.packages("tidyverse")
